#!/usr/bin/env ruby

require 'toygit'

type = ARGV[0]
raise 'Usage: toygit (do) [something]' if type.nil?
target = ARGV[1]

command = ToyGit::Command.new(ToyGit::Repository.new)
case type
when 'list'
  command.list
when 'goto'
  command.goto target
when 'return'
  command.return
when 'delete'
  command.delete target
when 'show'
  command.show target
when 'change'
  kind = target.to_sym
  toyid = ARGV[2]
  message = ARGV[3]
  command.change(kind, toyid, message)
else
  raise 'Unknown command: %s' % type
end
